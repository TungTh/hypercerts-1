{"version":3,"sources":["webpack:///webpack/bootstrap 82dd0c2ba005aa150b19","webpack:///./src/test.js","webpack:///./src/app.js"],"names":["getClaimsList","then","console","log","exports","module","ABI","CONTRACT_ADDRESS","web3","Web3","currentProvider","providers","HttpProvider","alert","eth","defaultAccount","accounts","HypercertsContract","contract","HypercertsInstance","at","getClaimsListCount","key","Promise","resolve","reject","getClaimsListSize","call","error","result","getClaim","index","claimsList","ps","i","value","push","all","results","j","length","claim","issuer","ipfsLink","revoked","catch","err","storeItem","item","setIpfsLink","getItemFromStorage","getIpfsLink"],"mappings":"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","file":"test.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 82dd0c2ba005aa150b19","import Ethereum from './app.js'\n\nEthereum.getClaimsList('aabb').then(console.log)\n\n\n\n// WEBPACK FOOTER //\n// ./src/test.js","exports = module.exports\n/*\nconst ABI = [\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      }\n    ],\n    'name': 'getIpfsLink',\n    'outputs': [\n      {\n        'name': '',\n        'type': 'string'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': '',\n        'type': 'bytes32'\n      }\n    ],\n    'name': 'bigList',\n    'outputs': [\n      {\n        'name': '',\n        'type': 'string'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': false,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      },\n      {\n        'name': 'ipfsLink',\n        'type': 'string'\n      }\n    ],\n    'name': 'setIpfsLink',\n    'outputs': [],\n    'payable': false,\n    'stateMutability': 'nonpayable',\n    'type': 'function'\n  }\n]\n*/\n\nconst ABI = [\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': '',\n        'type': 'bytes32'\n      },\n      {\n        'name': '',\n        'type': 'uint256'\n      }\n    ],\n    'name': 'newList',\n    'outputs': [\n      {\n        'name': 'issuer',\n        'type': 'address'\n      },\n      {\n        'name': 'ipfsLink',\n        'type': 'string'\n      },\n      {\n        'name': 'revoked',\n        'type': 'bool'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      }\n    ],\n    'name': 'getIpfsLink',\n    'outputs': [\n      {\n        'name': '',\n        'type': 'string'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      }\n    ],\n    'name': 'getClaimsListSize',\n    'outputs': [\n      {\n        'name': '',\n        'type': 'uint256'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      },\n      {\n        'name': 'claimIndex',\n        'type': 'uint256'\n      }\n    ],\n    'name': 'getClaim',\n    'outputs': [\n      {\n        'name': '',\n        'type': 'address'\n      },\n      {\n        'name': '',\n        'type': 'string'\n      },\n      {\n        'name': '',\n        'type': 'bool'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': true,\n    'inputs': [\n      {\n        'name': '',\n        'type': 'bytes32'\n      }\n    ],\n    'name': 'bigOldList',\n    'outputs': [\n      {\n        'name': '',\n        'type': 'string'\n      }\n    ],\n    'payable': false,\n    'stateMutability': 'view',\n    'type': 'function'\n  },\n  {\n    'constant': false,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      },\n      {\n        'name': 'ipfsLink',\n        'type': 'string'\n      }\n    ],\n    'name': 'issueClaim',\n    'outputs': [],\n    'payable': false,\n    'stateMutability': 'nonpayable',\n    'type': 'function'\n  },\n  {\n    'constant': false,\n    'inputs': [\n      {\n        'name': 'articleId',\n        'type': 'bytes32'\n      },\n      {\n        'name': 'ipfsLink',\n        'type': 'string'\n      }\n    ],\n    'name': 'setIpfsLink',\n    'outputs': [],\n    'payable': false,\n    'stateMutability': 'nonpayable',\n    'type': 'function'\n  }\n]\n\n// const CONTRACT_ADDRESS = '0x40a45F57D67ce54F19dD1f6b3b9F723b4eE6Ff30'\nconst CONTRACT_ADDRESS = '0x22913e635e15356dfdb3ef50806fd58154464b7a'\n\nif (typeof web3 !== 'undefined') {\n  web3 = new Web3(web3.currentProvider)\n} else {\n    // set the provider you want from Web3.providers\n  web3 = new Web3(new Web3.providers.HttpProvider('http://localhost:8545'))\n  console.alert('You need to have a Web3 provider. Try Metamask.')\n}\n\nweb3.eth.defaultAccount = web3.eth.accounts[0]\n\nvar HypercertsContract = web3.eth.contract(ABI)\n\nvar HypercertsInstance = HypercertsContract.at(CONTRACT_ADDRESS)\n\nexports.getClaimsListCount = function (key) {\n  return new Promise(function (resolve, reject) {\n    HypercertsInstance.getClaimsListSize.call(key, function (error, result) {\n      if (!error) {\n        // console.log(result)\n        resolve(result)\n      } else {\n        console.error(error)\n        reject(error)\n      }\n    })\n  })\n}\n\nexports.getClaim = function (key, index) {\n  return new Promise(function (resolve, reject) {\n    HypercertsInstance.getClaim.call(key, index, function (error, result) {\n      if (!error) {\n        // console.log(result)\n        resolve(result)\n      } else {\n        console.error(error)\n        reject(error)\n      }\n    })\n  })\n}\n\nexports.getClaimsList = function (key) {\n  return new Promise(function (resolve, reject) {\n    let claimsList = []\n    exports.getClaimsListCount(key).then(value => {\n      let ps = []\n      for (let i = 0; i < value; i++) {\n        ps.push(exports.getClaim(key, i))\n      }\n      Promise.all(ps)\n    .then((results) => {\n      console.log('---- RES ----')\n      console.log(results) // Result of all resolve as an array\n      for (let j = 0; j < results.length; j++) {\n        let claim = {}\n        claim.issuer = results[j][0]\n        claim.ipfsLink = results[j][1]\n        claim.revoked = results[j][2]\n\n        claimsList.push(claim)\n      }\n      resolve(claimsList)\n    }).catch(err => console.log(err))  // First rejected promise\n    })\n  })\n}\n\nexports.storeItem = function (key, item) {\n  return new Promise(function (resolve, reject) {\n    HypercertsInstance.setIpfsLink(key, item, function (error, result) {\n      if (!error) {\n        console.log(result)\n        resolve(result)\n      } else {\n        console.error(error)\n        reject(error)\n      }\n    })\n  })\n}\n\nexports.getItemFromStorage = function (key) {\n  return new Promise(function (resolve, reject) {\n    HypercertsInstance.getIpfsLink.call(key, function (error, result) {\n      if (!error) {\n        console.log(result)\n        resolve(result)\n      } else {\n        console.error(error)\n        reject(error)\n      }\n    })\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app.js"],"sourceRoot":""}